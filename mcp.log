2025-09-22 18:16:40,764 - __main__ - INFO - Starting Kaedim MCP Server...
2025-09-22 18:16:40,768 - __main__ - INFO - KaedimMCPServer.run() starting event loop...
2025-09-22 18:16:40,771 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
2025-09-22 18:16:40,772 - mcp.server.lowlevel.server - INFO - Processing request of type ListResourcesRequest
2025-09-22 18:16:40,774 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,774 - __main__ - INFO - Reading resource: resource://requests
2025-09-22 18:16:40,774 - __main__ - INFO - Successfully returning data for resource://requests
2025-09-22 18:16:40,775 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,775 - __main__ - INFO - Reading resource: resource://artists
2025-09-22 18:16:40,775 - __main__ - INFO - Successfully returning data for resource://artists
2025-09-22 18:16:40,777 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,777 - __main__ - INFO - Reading resource: resource://presets
2025-09-22 18:16:40,777 - __main__ - INFO - Successfully returning data for resource://presets
2025-09-22 18:16:40,777 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,778 - __main__ - INFO - Reading resource: resource://rules
2025-09-22 18:16:40,778 - __main__ - INFO - Successfully returning data for resource://rules
2025-09-22 18:16:40,778 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,778 - __main__ - INFO - Reading resource: resource://requests
2025-09-22 18:16:40,778 - __main__ - INFO - Successfully returning data for resource://requests
2025-09-22 18:16:40,779 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,780 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.780668+00:00", "data": {"tool": "validate_preset", "arguments": {"request_id": "req-001", "account_id": "ArcadiaXR"}}}
2025-09-22 18:16:40,780 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.780726+00:00", "data": {"tool": "validate_preset", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,781 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,782 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.782118+00:00", "data": {"tool": "plan_steps", "arguments": {"request_id": "req-001"}}}
2025-09-22 18:16:40,782 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.782179+00:00", "data": {"tool": "plan_steps", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,783 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,783 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.783416+00:00", "data": {"tool": "assign_artist", "arguments": {"request_id": "req-001"}}}
2025-09-22 18:16:40,783 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.783462+00:00", "data": {"tool": "assign_artist", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,784 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,785 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.785249+00:00", "data": {"tool": "record_decision", "arguments": {"request_id": "req-001", "decision": {"request_id": "req-001", "decision_id": "mcp-req-001-1758579400", "status": "success", "rationale": "Request req-001 from ArcadiaXR processed successfully. Validation passed (v3), 7 workflow steps planned, assigned to Ben with score 7/20.", "customer_message": null, "clarifying_question": null, "validation_result": {"ok": true, "errors": [], "preset_version": 3, "validation_timestamp": "2025-09-22T22:16:40.780721+00:00"}, "plan": {"steps": ["initial_review", "modeling", "texturing", "style_tweak_review", "export_unreal_glb", "qa_check", "delivery"], "matched_rules": [{"rule_id": "rule_0", "condition": {"account": "ArcadiaXR", "style": "stylized_hard_surface"}, "action": {"steps": ["style_tweak_review"]}}, {"rule_id": "rule_2", "condition": {"engine": "Unreal"}, "action": {"steps": ["export_unreal_glb"]}}], "estimated_hours": 14, "priority_queue": false}, "assignment": {"artist_id": "a-2", "artist_name": "Ben", "reason": "Best match: matches engine unreal, has 1 slots available", "match_score": 7, "alternative_artists": [{"id": "a-3", "name": "Cleo", "score": 2}]}, "trace": [{"step": "read_resource", "result": {"uri": "resource://artists", "count": 3}, "timestamp": "2025-09-22T18:16:40.778448"}, {"step": "read_resource", "result": {"uri": "resource://presets", "count": 2}, "timestamp": "2025-09-22T18:16:40.778453"}, {"step": "read_resource", "result": {"uri": "resource://rules", "count": 4}, "timestamp": "2025-09-22T18:16:40.778454"}, {"step": "validate_preset", "result": {"ok": true, "errors": [], "preset_version": 3, "validation_timestamp": "2025-09-22T22:16:40.780721+00:00"}, "timestamp": "2025-09-22T18:16:40.781285"}, {"step": "plan_steps", "result": {"steps": ["initial_review", "modeling", "texturing", "style_tweak_review", "export_unreal_glb", "qa_check", "delivery"], "matched_rules": [{"rule_id": "rule_0", "condition": {"account": "ArcadiaXR", "style": "stylized_hard_surface"}, "action": {"steps": ["style_tweak_review"]}}, {"rule_id": "rule_2", "condition": {"engine": "Unreal"}, "action": {"steps": ["export_unreal_glb"]}}], "estimated_hours": 14, "priority_queue": false}, "timestamp": "2025-09-22T18:16:40.782674"}, {"step": "assign_artist", "result": {"artist_id": "a-2", "artist_name": "Ben", "reason": "Best match: matches engine unreal, has 1 slots available", "match_score": 7, "alternative_artists": [{"id": "a-3", "name": "Cleo", "score": 2}]}, "timestamp": "2025-09-22T18:16:40.784005"}], "metrics": {"processing_time_ms": 9, "agent_type": "LLMEnhancedMCPAgent"}, "timestamp": "2025-09-22T18:16:40.784021"}}}}
2025-09-22 18:16:40,785 - __main__ - INFO - Event: {"type": "decision.recorded", "timestamp": "2025-09-22T22:16:40.785400+00:00", "data": {"decision_id": "dcc43640-0cec-4ec1-8371-3bcb81434992", "request_id": "req-001", "status": "success"}}
2025-09-22 18:16:40,785 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.785444+00:00", "data": {"tool": "record_decision", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,786 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,786 - __main__ - INFO - Reading resource: resource://artists
2025-09-22 18:16:40,786 - __main__ - INFO - Successfully returning data for resource://artists
2025-09-22 18:16:40,787 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,787 - __main__ - INFO - Reading resource: resource://presets
2025-09-22 18:16:40,787 - __main__ - INFO - Successfully returning data for resource://presets
2025-09-22 18:16:40,788 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,788 - __main__ - INFO - Reading resource: resource://rules
2025-09-22 18:16:40,788 - __main__ - INFO - Successfully returning data for resource://rules
2025-09-22 18:16:40,789 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:40,789 - __main__ - INFO - Reading resource: resource://requests
2025-09-22 18:16:40,789 - __main__ - INFO - Successfully returning data for resource://requests
2025-09-22 18:16:40,791 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,791 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.791755+00:00", "data": {"tool": "validate_preset", "arguments": {"request_id": "req-002", "account_id": "TitanMfg"}}}
2025-09-22 18:16:40,791 - __main__ - INFO - Event: {"type": "validation.failed", "timestamp": "2025-09-22T22:16:40.791800+00:00", "data": {"request_id": "req-002", "account_id": "TitanMfg", "error": "invalid_texture_packing", "missing_channels": ["a"]}}
2025-09-22 18:16:40,791 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.791857+00:00", "data": {"tool": "validate_preset", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,792 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,793 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.793126+00:00", "data": {"tool": "plan_steps", "arguments": {"request_id": "req-002"}}}
2025-09-22 18:16:40,793 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.793170+00:00", "data": {"tool": "plan_steps", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,793 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,794 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.794325+00:00", "data": {"tool": "assign_artist", "arguments": {"request_id": "req-002"}}}
2025-09-22 18:16:40,794 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.794374+00:00", "data": {"tool": "assign_artist", "duration_ms": 0, "success": true}}
2025-09-22 18:16:40,795 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:40,796 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:40.795963+00:00", "data": {"tool": "record_decision", "arguments": {"request_id": "req-002", "decision": {"request_id": "req-002", "decision_id": "mcp-req-002-1758579400", "status": "validation_failed", "rationale": "Request req-002 failed validation: Missing texture channels: a. Customer preset must be fixed before processing.", "customer_message": "Configuration issue for TitanMfg: Your texture packing appears incomplete. Please configure all RGBA channels so we can generate engine-ready textures.", "clarifying_question": "Would you like us to apply default channel mappings now, or wait for your preset update?", "validation_result": {"ok": false, "errors": ["Missing texture channels: a"], "preset_version": 1, "validation_timestamp": "2025-09-22T22:16:40.791851+00:00"}, "plan": {"steps": ["initial_review", "modeling", "texturing", "export_unreal_glb", "validate_topology_quad_only", "qa_check", "delivery"], "matched_rules": [{"rule_id": "rule_1", "condition": {"priority": "priority"}, "action": {"sla_hours": 24, "queue": "expedite"}}, {"rule_id": "rule_2", "condition": {"engine": "Unreal"}, "action": {"steps": ["export_unreal_glb"]}}, {"rule_id": "rule_3", "condition": {"topology": "quad_only"}, "action": {"steps": ["validate_topology_quad_only"]}}], "estimated_hours": 14, "priority_queue": true}, "assignment": {"artist_id": "a-2", "artist_name": "Ben", "reason": "Best match: matches engine unreal, matches topology quad_only, has 1 slots available", "match_score": 12, "alternative_artists": [{"id": "a-3", "name": "Cleo", "score": 2}]}, "trace": [{"step": "read_resource", "result": {"uri": "resource://artists", "count": 3}, "timestamp": "2025-09-22T18:16:40.789302"}, {"step": "read_resource", "result": {"uri": "resource://presets", "count": 2}, "timestamp": "2025-09-22T18:16:40.789306"}, {"step": "read_resource", "result": {"uri": "resource://rules", "count": 4}, "timestamp": "2025-09-22T18:16:40.789307"}, {"step": "validate_preset", "result": {"ok": false, "errors": ["Missing texture channels: a"], "preset_version": 1, "validation_timestamp": "2025-09-22T22:16:40.791851+00:00"}, "timestamp": "2025-09-22T18:16:40.792352"}, {"step": "plan_steps", "result": {"steps": ["initial_review", "modeling", "texturing", "export_unreal_glb", "validate_topology_quad_only", "qa_check", "delivery"], "matched_rules": [{"rule_id": "rule_1", "condition": {"priority": "priority"}, "action": {"sla_hours": 24, "queue": "expedite"}}, {"rule_id": "rule_2", "condition": {"engine": "Unreal"}, "action": {"steps": ["export_unreal_glb"]}}, {"rule_id": "rule_3", "condition": {"topology": "quad_only"}, "action": {"steps": ["validate_topology_quad_only"]}}], "estimated_hours": 14, "priority_queue": true}, "timestamp": "2025-09-22T18:16:40.793650"}, {"step": "assign_artist", "result": {"artist_id": "a-2", "artist_name": "Ben", "reason": "Best match: matches engine unreal, matches topology quad_only, has 1 slots available", "match_score": 12, "alternative_artists": [{"id": "a-3", "name": "Cleo", "score": 2}]}, "timestamp": "2025-09-22T18:16:40.794791"}], "metrics": {"processing_time_ms": 8, "agent_type": "LLMEnhancedMCPAgent"}, "timestamp": "2025-09-22T18:16:40.794804"}}}}
2025-09-22 18:16:40,796 - __main__ - INFO - Event: {"type": "decision.recorded", "timestamp": "2025-09-22T22:16:40.796326+00:00", "data": {"decision_id": "51e53d41-4e7a-45c3-914a-a037546ea781", "request_id": "req-002", "status": "validation_failed"}}
2025-09-22 18:16:40,796 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:40.796361+00:00", "data": {"tool": "record_decision", "duration_ms": 0, "success": true}}
2025-09-22 18:16:44,885 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:44,886 - __main__ - INFO - Reading resource: resource://artists
2025-09-22 18:16:44,886 - __main__ - INFO - Successfully returning data for resource://artists
2025-09-22 18:16:44,888 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:44,888 - __main__ - INFO - Reading resource: resource://presets
2025-09-22 18:16:44,888 - __main__ - INFO - Successfully returning data for resource://presets
2025-09-22 18:16:44,890 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:44,890 - __main__ - INFO - Reading resource: resource://rules
2025-09-22 18:16:44,890 - __main__ - INFO - Successfully returning data for resource://rules
2025-09-22 18:16:44,891 - mcp.server.lowlevel.server - INFO - Processing request of type ReadResourceRequest
2025-09-22 18:16:44,891 - __main__ - INFO - Reading resource: resource://requests
2025-09-22 18:16:44,891 - __main__ - INFO - Successfully returning data for resource://requests
2025-09-22 18:16:44,893 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:44,894 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:44.894385+00:00", "data": {"tool": "validate_preset", "arguments": {"request_id": "req-003", "account_id": "BlueNova"}}}
2025-09-22 18:16:44,894 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:44.894572+00:00", "data": {"tool": "validate_preset", "duration_ms": 0, "success": true}}
2025-09-22 18:16:44,896 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:44,897 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:44.897645+00:00", "data": {"tool": "plan_steps", "arguments": {"request_id": "req-003"}}}
2025-09-22 18:16:44,897 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:44.897795+00:00", "data": {"tool": "plan_steps", "duration_ms": 0, "success": true}}
2025-09-22 18:16:44,899 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:44,899 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:44.899781+00:00", "data": {"tool": "assign_artist", "arguments": {"request_id": "req-003"}}}
2025-09-22 18:16:44,899 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:44.899876+00:00", "data": {"tool": "assign_artist", "duration_ms": 0, "success": true}}
2025-09-22 18:16:44,901 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-09-22 18:16:44,902 - __main__ - INFO - Event: {"type": "tool.called", "timestamp": "2025-09-22T22:16:44.902648+00:00", "data": {"tool": "record_decision", "arguments": {"request_id": "req-003", "decision": {"request_id": "req-003", "decision_id": "mcp-req-003-1758579404", "status": "validation_failed", "rationale": "Request req-003 failed validation: No texture packing configuration found, Preset version not specified. Customer preset must be fixed before processing.", "customer_message": "Validation error: No texture packing configuration found", "clarifying_question": "Would you like help updating your preset?", "validation_result": {"ok": false, "errors": ["No texture packing configuration found", "Preset version not specified"], "preset_version": null, "validation_timestamp": "2025-09-22T22:16:44.894556+00:00"}, "plan": {"steps": ["initial_review", "modeling", "texturing", "qa_check", "delivery"], "matched_rules": [], "estimated_hours": 10, "priority_queue": false}, "assignment": {"artist_id": "a-3", "artist_name": "Cleo", "reason": "Best match: matches style lowpoly_flat, matches engine unity, has 1 slots available", "match_score": 17, "alternative_artists": [{"id": "a-2", "name": "Ben", "score": 2}]}, "trace": [{"step": "read_resource", "result": {"uri": "resource://artists", "count": 3}, "timestamp": "2025-09-22T18:16:44.891066"}, {"step": "read_resource", "result": {"uri": "resource://presets", "count": 2}, "timestamp": "2025-09-22T18:16:44.891077"}, {"step": "read_resource", "result": {"uri": "resource://rules", "count": 4}, "timestamp": "2025-09-22T18:16:44.891079"}, {"step": "validate_preset", "result": {"ok": false, "errors": ["No texture packing configuration found", "Preset version not specified"], "preset_version": null, "validation_timestamp": "2025-09-22T22:16:44.894556+00:00"}, "timestamp": "2025-09-22T18:16:44.895917"}, {"step": "plan_steps", "result": {"steps": ["initial_review", "modeling", "texturing", "qa_check", "delivery"], "matched_rules": [], "estimated_hours": 10, "priority_queue": false}, "timestamp": "2025-09-22T18:16:44.898541"}, {"step": "assign_artist", "result": {"artist_id": "a-3", "artist_name": "Cleo", "reason": "Best match: matches style lowpoly_flat, matches engine unity, has 1 slots available", "match_score": 17, "alternative_artists": [{"id": "a-2", "name": "Ben", "score": 2}]}, "timestamp": "2025-09-22T18:16:44.900739"}], "metrics": {"processing_time_ms": 17, "agent_type": "LLMEnhancedMCPAgent"}, "timestamp": "2025-09-22T18:16:44.900767"}}}}
2025-09-22 18:16:44,902 - __main__ - INFO - Event: {"type": "decision.recorded", "timestamp": "2025-09-22T22:16:44.902927+00:00", "data": {"decision_id": "5d860171-4f0a-49ea-8ea4-f01d214e159c", "request_id": "req-003", "status": "validation_failed"}}
2025-09-22 18:16:44,903 - __main__ - INFO - Event: {"type": "tool.completed", "timestamp": "2025-09-22T22:16:44.902995+00:00", "data": {"tool": "record_decision", "duration_ms": 0, "success": true}}
